We then impose the following constraints:
\begin{description}
	\item[Nontrivial contexts:] \If $\order{\peekStackFour}_{i} = 1$ \Then $\order{\cn^{\cc4}}_{i} \neq 0$ \quad (\trash)
	\item[Setting $\stackContextFirst$ and $\stackContextAgain$:]
		we impose
		\begin{enumerate}
			\item $\stackContextFirst$ and $\stackContextAgain$ are binary
			\item $\stackContextFirst_{i} + \stackContextAgain_{i} = \order{\peekStackFour}_{i}$
			\item \If $\order{\peekStackFour}_{i} = 0$ \Then $\stackContextFirst_{i + 1} = \order{\peekStackFour}_{i + 1}$
			\item \If $\order{\peekStackFour}_{i} = 1$ \Then
				\begin{enumerate}
					\item \If $\stackContextFirst_{i + 1} = 1$ \Then $\cn^{\cc4}_{i + 1} \neq \cn^{\cc4}_{i}$
					\item \If $\stackContextAgain_{i + 1} = 1$ \Then $\cn^{\cc4}_{i + 1} =    \cn^{\cc4}_{i}$
				\end{enumerate}
		\end{enumerate}
	\item[Setting $\stackHeightFirst$ and $\stackHeightAgain$:]
		we impose
		\begin{enumerate}
			\item $\stackHeightFirst$ and $\stackHeightAgain$ are binary
			\item $\stackHeightFirst_{i} + \stackHeightAgain_{i} = \order{\peekStackFour}_{i}$
			\item \If $\order{\peekStackFour}_{i} = 0$ \Then $\stackHeightFirst_{i + 1} = \order{\peekStackFour}_{i + 1}$
			\item \If $\order{\peekStackFour}_{i} = 1$ \Then
				\begin{enumerate}
					\item \If $\stackHeightFirst_{i + 1} = 1$ \Then $\order{\stackItemHeight{\col{1234}}}_{i + 1} \neq \order{\stackItemHeight{\col{1234}}}_{i}$
					\item \If $\stackHeightAgain_{i + 1} = 1$ \Then $\order{\stackItemHeight{\col{1234}}}_{i + 1} =    \order{\stackItemHeight{\col{1234}}}_{i}$
				\end{enumerate}
		\end{enumerate}
	\item[Setting $\stackSpotFirst$ and $\stackSpotAgain$:]
		we impose
		\begin{enumerate}
			\item $\stackSpotFirst$ and $\stackSpotAgain$ are binary
			\item $\stackSpotFirst_{i} + \stackSpotAgain_{i} = \order{\peekStackFour}_{i}$
			\item $\stackSpotAgain_{i} = \stackContextAgain_{i} \cdot \stackHeightAgain_{i}$
		\end{enumerate}
	\item[First and repeat context encounter:]
		we impose
		\begin{enumerate}
			\item \If $\stackContextFirst_{i} = 1$ \Then $\order{\stackItemHeight{\col{1234}}}_{i} = 0$
			\item \If $\stackContextAgain_{i} = 1$ \Then $\order{\stackItemHeight{\col{1234}}}_{i}
				\in \left \{ \order{\stackItemHeight{\col{1234}}}_{i - 1}, 1 + \order{\stackItemHeight{\col{1234}}}_{i - 1} \right \}$
		\end{enumerate}
	\item[First and repeat spot encounter:]
		we impose
		\begin{enumerate}
			\item \If $\stackSpotFirst_{i} = 1$ \Then $\order{\stackItemPop{\col{1234}}}_{i} = 0$
			\item \If $\stackSpotAgain_{i} = 1$ \et $\order{\stackItemHeight{\col{1234}}}_{i} \neq 0$ \Then
				\begin{enumerate}
					\item $\order{\stackItemPop{\col{1234}}}_{i} + \order{\stackItemPop{\col{1234}}}_{i - 1} = 1$,
					\item \If $\order{\stackItemPop{\col{1234}}}_{i} = 1$ \Then
						\[
							\left\{ \begin{array}{l}
								\order{\stackItemValHi{\col{1234}}}_{i} = \order{\stackItemValHi{\col{1234}}}_{i - 1} \\
								\order{\stackItemValLo{\col{1234}}}_{i} = \order{\stackItemValLo{\col{1234}}}_{i - 1} \\
							\end{array} \right.
						\]
				\end{enumerate}
		\end{enumerate}
\end{description}
In other words, the binary flag column $\order{\stackItemPop{\col{1234}}}$ at a given height oscillates (we push, pop, push, pop, push, etc\dots{}); when popping an item (i.e. when $\order{\stackItemPop{\col{1234}}}_{i+1} = 1$), we retrieve the value previously pushed at that height;
